(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{153:function(t,e,n){},154:function(t,e,n){},179:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n(26),i=n.n(c);n(153),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(154);var o,r,s=n(20),d=n(266),l=n(265),u=n(267),j=n(269),O=n(262),b=n(268),f=n(121),p=n.n(f),T=n(16),h=n(119),m=n.n(h).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"4b505e77-20a4-4b88-91c9-9a97e6bfb421"}}),S=function(t){return m.post("auth/login",t)},x=function(){return m.delete("auth/login")},I=function(){return m.get("auth/me")},g=function(){return m.get("todo-lists")},y=function(t){return m.post("todo-lists",{title:t})},v=function(t){return m.delete("todo-lists/".concat(t))},D=function(t,e){return m.put("todo-lists/".concat(t),{title:e})},L=function(t){return m.get("todo-lists/".concat(t,"/tasks"))},A=function(t,e){return m.post("todo-lists/".concat(t,"/tasks"),{title:e})},E=function(t,e){return m.delete("todo-lists/".concat(t,"/tasks/").concat(e))},k=function(t,e,n){return m.put("todo-lists/".concat(t,"/tasks/").concat(e),n)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(o||(o={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.High=2]="High",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(r||(r={}));var w={status:"idle",error:null,isInitialized:!1},C=function(t){return{type:"APP/SET-APP-STATUS",status:t}},P=function(t){return{type:"APP/SET-APP-ERROR",error:t}},N=function(t,e){e.messages.length?t(P(e.messages[0])):t(P("Some error!")),t(C("failed"))},K=function(t,e){t(P(e.message?e.message:"Some error occurred")),t(C("failed"))},R={isLoggedIn:!1},U=function(t){return{type:"AUTH/SET-IS-LOGGED-IN",payload:{isLoggedIn:t}}},F=n(2);function G(){var t=Object(s.b)();return Object(F.jsx)(l.a,{sx:{flexGrow:1},children:Object(F.jsx)(d.a,{position:"static",children:Object(F.jsxs)(u.a,{children:[Object(F.jsx)(b.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(F.jsx)(p.a,{})}),Object(F.jsx)(j.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"News"}),Object(F.jsx)(O.a,{color:"inherit",onClick:function(){t((function(t,e){t(C("loading")),x().then((function(e){0===e.data.resultCode?(t(U(!1)),t(C("succeeded"))):N(t,e.data)})).catch((function(e){K(t,e)}))}))},children:"Log out"})]})})})}var M=n(263),H=n(264),z=n(261),V=n(9),_=n(254),Z=n(249),B=Object(a.memo)((function(t){console.log("Rerender");var e=Object(a.useState)(""),n=Object(V.a)(e,2),c=n[0],i=n[1],o=Object(a.useState)(null),r=Object(V.a)(o,2),s=r[0],d=r[1],l=function(){""!==c.trim()?(t.addItem(c),i("")):d("Title is required")};return Object(F.jsxs)("div",{children:[Object(F.jsx)(_.a,{variant:"outlined",error:!!s,value:c,onChange:function(t){i(t.currentTarget.value)},onKeyPress:function(t){s&&d(null),13===t.charCode&&l()},label:"Title",helperText:s,disabled:t.disabled}),Object(F.jsx)(b.a,{color:"primary",onClick:l,disabled:t.disabled,children:Object(F.jsx)(Z.a,{})}),s&&Object(F.jsx)("div",{className:"error-message",children:s})]})})),q=Object(a.memo)((function(t){var e=Object(a.useState)(!1),n=Object(V.a)(e,2),c=n[0],i=n[1],o=Object(a.useState)(t.value),r=Object(V.a)(o,2),s=r[0],d=r[1];return c?Object(F.jsx)("input",{value:s,onChange:function(t){d(t.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),t.onChange(s)},disabled:t.disabled}):Object(F.jsx)("span",{onDoubleClick:function(){i(!0),d(t.value)},children:t.value})})),Y=n(19),J=n(129),W=n(122),$=n(15),Q=n(3),X={},tt=function(t,e,n){return function(a,c,i){var o=c().tasks[t].find((function(t){return t.id===e}));if(!o)throw new Error("Task is not found in state");var r=Object(T.a)({title:o.title,description:o.description,status:o.status,priority:o.priority,startDate:o.startDate,deadline:o.deadline},n);a(C("loading")),k(t,e,r).then((function(c){0===c.data.resultCode?(a(function(t,e,n){return{type:"TASKS/UPDATE-TASK",payload:{todolistId:t,taskID:e,model:n}}}(t,e,n)),a(C("succeeded"))):N(a,c.data)})).catch((function(t){K(a,t)}))}},et=[],nt=function(t,e){return{type:"TODOLIST/CHANGE-TODOLIST-FILTER",payload:{todolistId:t,newFilter:e}}},at=function(t,e){return{type:"TODOLIST/SET-TODOLIST-ENTITY-STATUS",payload:{todolistId:t,newStatus:e}}},ct=n(255),it=n(123),ot=n.n(it),rt=n(256),st=function(t){var e=t.checked,n=t.callback;return Object(F.jsx)(rt.a,{checked:e,color:"primary",onChange:function(t){n(t.currentTarget.checked)}})},dt=n(250),lt=Object(a.memo)((function(t){var e=t.todolistID,n=t.task,c=t.entityStatus,i=Object(s.b)(),r=Object(a.useCallback)((function(){i(function(t,e){return function(n,a,c){n(C("loading")),E(t,e).then((function(a){n(function(t,e){return{type:"TASKS/REMOVE-TASK",payload:{todolistId:t,taskID:e}}}(t,e)),n(C("succeeded"))}))}}(e,n.id))}),[i]),d=Object(a.useCallback)((function(t){i(tt(e,n.id,{title:t}))}),[i,e,n.id]),l=Object(a.useCallback)((function(t){var a=t?o.Completed:o.New;i(tt(e,n.id,{status:a}))}),[i,e,n.id]);return Object(F.jsxs)("li",{className:n.status===o.Completed?"is-done":"",children:[Object(F.jsx)(st,{callback:l,checked:n.status===o.Completed}),Object(F.jsx)(q,{value:n.title,onChange:function(t){return d(t)},disabled:"loading"===c}),Object(F.jsx)(b.a,{onClick:r,children:Object(F.jsx)(dt.a,{})})]},n.id)})),ut=Object(a.memo)((function(t){var e=t.todolist,n=Object(s.c)((function(t){return t.tasks[e.id]})),c=Object(s.b)(),i=Object(a.useCallback)((function(t){var n,a;c((n=e.id,a=t,function(t,e,c){t(C("loading")),A(n,a).then((function(e){0===e.data.resultCode?(t({type:"TASKS/ADD-TASK",payload:{todolistId:n,task:e.data.data.item}}),t(C("succeeded"))):N(t,e.data)})).catch((function(e){K(t,e)}))}))}),[e.id,c]),r=Object(a.useCallback)((function(){var t;c((t=e.id,function(e,n){e(C("loading")),e(at(t,"loading")),v(t).then((function(n){e({type:"TODOLIST/REMOVE-TODOLIST",payload:{todolistId:t}}),e(C("succeeded")),e(at(t,"succeeded"))}))}))}),[e.id,c]),d=Object(a.useCallback)((function(t){c(function(t,e){return function(n,a){n(C("loading")),D(t,e).then((function(a){0===a.data.resultCode?(n({type:"TODOLIST/CHANGE-TODOLIST-TITLE",payload:{todolistId:t,newTodolistTitle:e}}),n(C("succeeded"))):N(n,a.data)})).catch((function(t){K(n,t)}))}}(e.id,t))}),[e.id,c]),l=Object(a.useCallback)((function(){return c(nt(e.id,"all"))}),[c]),u=Object(a.useCallback)((function(){return c(nt(e.id,"active"))}),[c]),j=Object(a.useCallback)((function(){return c(nt(e.id,"completed"))}),[c]);return"active"===e.filter?n=n.filter((function(t){return t.status===o.New})):"completed"===e.filter&&(n=n.filter((function(t){return t.status===o.Completed}))),Object(a.useEffect)((function(){var t;c((t=e.id,function(e,n){e(C("loading")),L(t).then((function(n){e({type:"TASKS/SET-TASKS",payload:{todolistId:t,tasks:n.data.items}}),e(C("succeeded"))}))}))}),[e.id]),Object(F.jsxs)("div",{children:[Object(F.jsxs)("h3",{children:[Object(F.jsx)(q,{value:e.title,onChange:d,disabled:"loading"===e.entityStatus}),Object(F.jsx)(ct.a,{onClick:r,disabled:"loading"===e.entityStatus,children:Object(F.jsx)(ot.a,{})})]}),Object(F.jsx)(B,{addItem:i}),Object(F.jsx)("ul",{children:n.map((function(t){return Object(F.jsx)(lt,{todolistID:e.id,task:t,entityStatus:e.entityStatus})}))}),Object(F.jsxs)("div",{children:[Object(F.jsx)(O.a,{color:"success",variant:"all"===e.filter?"contained":"text",onClick:l,children:"All"}),Object(F.jsx)(O.a,{color:"primary",variant:"active"===e.filter?"contained":"text",onClick:u,children:"Active"}),Object(F.jsx)(O.a,{color:"secondary",variant:"completed"===e.filter?"contained":"text",onClick:j,children:"Completed"})]})]})})),jt=n(13),Ot=function(){var t=Object(s.c)((function(t){return t.todolists})),e=Object(s.c)((function(t){return t.auth.isLoggedIn})),n=Object(s.b)(),c=Object(a.useCallback)((function(t){n(function(t){return function(e,n){e(C("loading")),y(t).then((function(t){0===t.data.resultCode?(e({type:"TODOLIST/ADD-TODOLIST",payload:{todolist:t.data.data.item}}),e(C("succeeded"))):N(e,t.data)})).catch((function(t){K(e,t)}))}}(t))}),[n]);return Object(a.useEffect)((function(){n((function(t,e){t(C("loading")),g().then((function(e){t({type:"TODOLIST/SET-TODOLISTS",payload:{todolists:e.data}}),t(C("succeeded"))}))}))}),[]),e?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(M.a,{fixed:!0,style:{marginTop:"2rem",marginBottom:"2rem"},children:Object(F.jsx)(B,{addItem:c})}),Object(F.jsx)(H.a,{container:!0,spacing:3,children:t.map((function(t){return Object(F.jsx)(H.a,{item:!0,children:Object(F.jsx)(z.a,{elevation:3,style:{padding:"10px",borderRadius:"0.5rem"},children:Object(F.jsx)(ut,{todolist:t},t.id)})},t.id)}))})]}):Object(F.jsx)(jt.a,{to:xt.LOGIN})},bt=n(253),ft=n(273),pt=n(252),Tt=n(259),ht=n(257),mt=a.forwardRef((function(t,e){return Object(F.jsx)(ht.a,Object(T.a)({elevation:6,ref:e,variant:"filled"},t))}));function St(){var t=Object(s.b)(),e=Object(s.c)((function(t){return t.app.error})),n=function(e,n){"clickaway"!==n&&t(P(null))},a=null!==e;return Object(F.jsx)(pt.a,{spacing:2,sx:{width:"100%"},children:Object(F.jsx)(Tt.a,{open:a,autoHideDuration:1e4,onClose:n,children:Object(F.jsx)(mt,{onClose:n,severity:"error",sx:{width:"100%"},children:e||"Some error !"})})})}var xt,It=n(81),gt=n(270),yt=n(272),vt=n(271),Dt=n(247),Lt=n(127),At=function(){var t=Object(s.c)((function(t){return t.auth.isLoggedIn})),e=Object(s.b)(),n=Object(Lt.a)({validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Email is required!",t.password||(e.password="Password is required!"),e},initialValues:{email:"",password:"",rememberMe:!1,captcha:""},onSubmit:function(t){var a;e((a=t,function(t,e){t(C("loading")),S(a).then((function(e){0===e.data.resultCode?(t(U(!0)),t(C("succeeded"))):N(t,e.data)})).catch((function(e){K(t,e)}))})),n.resetForm()}});return t?Object(F.jsx)(jt.a,{to:xt.DEFAULT}):Object(F.jsx)(H.a,{container:!0,justifyContent:"center",children:Object(F.jsx)("form",{onSubmit:n.handleSubmit,children:Object(F.jsx)(H.a,{item:!0,justifyContent:"center",children:Object(F.jsxs)(gt.a,{children:[Object(F.jsxs)(Dt.a,{children:[Object(F.jsxs)("p",{children:["To log in get registered",Object(F.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:" here"})]}),Object(F.jsx)("p",{children:"or use common test account credentials:"}),Object(F.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(F.jsx)("p",{children:"Password: free"})]}),Object(F.jsxs)(vt.a,{children:[Object(F.jsx)(_.a,Object(T.a)({label:"Email",margin:"normal"},n.getFieldProps("email"))),n.touched&&n.errors.email?Object(F.jsx)("div",{style:{color:"red"},children:n.errors.email}):null,Object(F.jsx)(_.a,Object(T.a)({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),n.touched&&n.errors.password?Object(F.jsx)("div",{style:{color:"red"},children:n.errors.password}):null,Object(F.jsx)(yt.a,Object(T.a)(Object(T.a)({label:"Remember me",control:Object(F.jsx)(rt.a,{})},n.getFieldProps("rememberMe")),{},{checked:n.values.rememberMe})),Object(F.jsx)(O.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})};!function(t){t.DEFAULT="/",t.LOGIN="/login",t.NOT_FOUND="/404",t.ALL="*"}(xt||(xt={}));var Et=function(){var t=Object(s.c)((function(t){return t.app.status})),e=Object(s.c)((function(t){return t.app.isInitialized})),n=Object(s.b)();return Object(a.useEffect)((function(){n((function(t,e,n){I().then((function(e){0===e.data.resultCode?(t(U(!0)),t(C("succeeded"))):N(t,e.data),t({type:"APP/SET-IS-INITIALIZED",isInitialized:!0})})).catch((function(e){K(t,e)}))}))}),[]),e?Object(F.jsx)(It.a,{basename:"/toDoList_DmitriyKurgan",children:Object(F.jsxs)("div",{className:"App",children:[Object(F.jsx)(St,{}),Object(F.jsx)(G,{}),"loading"===t&&Object(F.jsx)(ft.a,{}),Object(F.jsx)(M.a,{fixed:!0,children:Object(F.jsxs)(jt.d,{children:[Object(F.jsx)(jt.b,{path:xt.DEFAULT,element:Object(F.jsx)(Ot,{})}),Object(F.jsx)(jt.b,{path:xt.LOGIN,element:Object(F.jsx)(At,{})}),Object(F.jsx)(jt.b,{path:xt.NOT_FOUND,element:Object(F.jsx)("h1",{children:"PAGE NOT FOUND"})}),Object(F.jsx)(jt.b,{path:xt.ALL,element:Object(F.jsx)(jt.a,{to:xt.NOT_FOUND})})]})})]})}):Object(F.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(F.jsx)(bt.a,{})})},kt=n(92),wt=n(126),Ct=Object(kt.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TASKS/REMOVE-TASK":return Object(T.a)(Object(T.a)({},t),{},Object(Q.a)({},e.payload.todolistId,t[e.payload.todolistId].filter((function(t){return t.id!==e.payload.taskID}))));case"TASKS/ADD-TASK":return Object(T.a)(Object(T.a)({},t),{},Object(Q.a)({},e.payload.todolistId,[e.payload.task].concat(Object($.a)(t[e.payload.todolistId]))));case"TASKS/UPDATE-TASK":return Object(T.a)(Object(T.a)({},t),{},Object(Q.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskID?Object(T.a)(Object(T.a)({},t),e.payload.model):t}))));case"TODOLIST/ADD-TODOLIST":return Object(T.a)(Object(T.a)({},t),{},Object(Q.a)({},e.payload.todolist.id,[]));case"TODOLIST/REMOVE-TODOLIST":var n=Object(T.a)({},t),a=e.payload.todolistId,c=(Object(W.a)(n[a]),Object(Y.a)(n,[a].map(J.a)));return c;case"TODOLIST/SET-TODOLISTS":var i=Object(T.a)({},t);return e.payload.todolists.forEach((function(t){i[t.id]=[]})),i;case"TASKS/SET-TASKS":return Object(T.a)(Object(T.a)({},t),{},Object(Q.a)({},e.payload.todolistId,e.payload.tasks));default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TODOLIST/REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.payload.todolistId}));case"TODOLIST/ADD-TODOLIST":return[].concat(Object($.a)(t),[Object(T.a)(Object(T.a)({},e.payload.todolist),{},{filter:"all"})]);case"TODOLIST/CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.payload.todolistId?Object(T.a)(Object(T.a)({},t),{},{title:e.payload.newTodolistTitle}):t}));case"TODOLIST/CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.payload.todolistId?Object(T.a)(Object(T.a)({},t),{},{filter:e.payload.newFilter}):t}));case"TODOLIST/SET-TODOLISTS":return e.payload.todolists.map((function(t){return Object(T.a)(Object(T.a)({},t),{},{filter:"All"})}));case"TODOLIST/SET-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.payload.todolistId?Object(T.a)(Object(T.a)({},t),{},{entityStatus:e.payload.newStatus}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-APP-STATUS":return Object(T.a)(Object(T.a)({},t),{},{status:e.status});case"APP/SET-APP-ERROR":return Object(T.a)(Object(T.a)({},t),{},{error:e.error});case"APP/SET-IS-INITIALIZED":return Object(T.a)(Object(T.a)({},t),{},{isInitialized:e.isInitialized});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0;return"AUTH/SET-IS-LOGGED-IN"===e.type?Object(T.a)(Object(T.a)({},t),{},{isLoggedIn:e.payload.isLoggedIn}):t}}),Pt=Object(kt.c)(Ct,Object(kt.a)(wt.a));window.store=Pt,i.a.render(Object(F.jsx)(s.a,{store:Pt,children:Object(F.jsx)(Et,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[179,1,2]]]);
//# sourceMappingURL=main.cea43aab.chunk.js.map